"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[754],{1754:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(2791),r=s(1878),c=s(7689),n=s(2937),o=s(5866),i=s(1652),d=s(4750),l=s(1716),h=s(7892),m=s.n(h),p=s(184);const u=()=>{const{marketplace:e}=(0,c.UO)(),{fetchOrder:a,orderList:s,sumPrice:h,sumTotalPrice:u,sumHpp:x,sumMargin:j,sumAdmin:_,sumOngkir:g,sumCleanMargin:f}=(0,r.Z)((e=>e)),D=new Intl.NumberFormat("pt-BR"),w=new Date,k=new Date(w.getFullYear(),w.getMonth(),1),P=w.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"),[b,M]=(0,t.useState)(m()(k)),[y,O]=(0,t.useState)(m()(P));return(0,t.useEffect)((()=>{a(e,b,y)}),[a,e,b,y]),(0,p.jsx)(n.rb,{children:(0,p.jsx)(n.b7,{xs:12,children:(0,p.jsxs)(n.xH,{className:"mb-4",children:[(0,p.jsx)(n.bn,{children:(0,p.jsx)("strong",{children:"Sales Order"})}),(0,p.jsxs)(n.sl,{children:[(0,p.jsxs)("div",{className:"row align-items-end",children:[(0,p.jsx)("div",{className:"col-3",children:(0,p.jsx)(i._,{dateAdapter:d.y,children:(0,p.jsx)(o.C,{components:["DatePicker","DatePicker"],children:(0,p.jsx)(l.M,{label:"Tanggal Awal",value:b,onChange:e=>M(e)})})})}),(0,p.jsx)("div",{className:"col-3",children:(0,p.jsx)(i._,{dateAdapter:d.y,children:(0,p.jsx)(o.C,{components:["DatePicker","DatePicker"],children:(0,p.jsx)(l.M,{label:"Tanggal Akhir",value:y,onChange:e=>O(e)})})})})]}),(0,p.jsxs)("table",{className:"table mtop30",children:[(0,p.jsxs)("thead",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col"}),(0,p.jsx)("th",{scope:"col"}),(0,p.jsx)("th",{scope:"col"}),(0,p.jsx)("th",{scope:"col"}),(0,p.jsx)("th",{scope:"col",children:D.format(h)}),(0,p.jsx)("th",{scope:"col",children:D.format(u)}),(0,p.jsx)("th",{scope:"col",children:D.format(x)}),(0,p.jsx)("th",{scope:"col",children:D.format(j)}),(0,p.jsx)("th",{scope:"col",children:D.format(_)}),(0,p.jsx)("th",{scope:"col",children:D.format(g)}),(0,p.jsx)("th",{scope:"col",children:D.format(f)})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col",children:"#"}),(0,p.jsx)("th",{scope:"col",children:"InvoiceNo"}),(0,p.jsx)("th",{scope:"col",children:"Nama Barang"}),(0,p.jsx)("th",{scope:"col",children:"Qty"}),(0,p.jsx)("th",{scope:"col",children:"Sales Price"}),(0,p.jsx)("th",{scope:"col",children:"Total Price"}),(0,p.jsx)("th",{scope:"col",children:"Hpp"}),(0,p.jsx)("th",{scope:"col",children:"Gross"}),(0,p.jsx)("th",{scope:"col",children:"Admin"}),(0,p.jsx)("th",{scope:"col",children:"Ongkir"}),(0,p.jsx)("th",{scope:"col",children:"Clean Margin"})]})]}),(0,p.jsx)("tbody",{children:s.map(((e,a)=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:a+1}),(0,p.jsx)("td",{children:e.invoice_no}),(0,p.jsx)("td",{children:(0,p.jsx)("b",{children:e.product_name})}),(0,p.jsx)("td",{children:(0,p.jsx)("b",{children:e.qty})}),(0,p.jsx)("td",{children:D.format(e.sales_price)}),(0,p.jsx)("td",{children:D.format(e.total_price)}),(0,p.jsx)("td",{children:D.format(e.hpp)}),(0,p.jsx)("td",{children:D.format(e.gross_margin)}),(0,p.jsx)("td",{children:D.format(e.power_merchant_fee)}),(0,p.jsx)("td",{children:D.format(e.ongkir_fee)}),(0,p.jsx)("td",{children:D.format(Math.round(e.clean_margin))})]},a)))})]})]})]})})})}},1878:(e,a,s)=>{s.d(a,{Z:()=>o});var t=s(5847);const r=function(e){let{url:a,method:s,marketplace_id:t,start_date:r,end_date:c,formData:n,soNumber:o,status:i}=e;return fetch(a,{method:s,headers:{marketplace_id:t,start_date:r,end_date:c,invoice_no:o,status:i},body:n}).then((e=>e)).then((e=>e.json()),(e=>(console.log(e),"")))};var c=s(7892),n=s.n(c);const o=(0,t.Ue)((e=>({sisaPersediaan:0,sumPrice:0,sumTotalPrice:0,sumHpp:0,sumMargin:0,sumAdmin:0,sumOngkir:0,sumCleanMargin:0,productList:[],orderList:[],startDate:"",endDate:"",message:"",setStartDate:async a=>{console.log(a),e({startDate:a})},setEndDate:async a=>{e({endDate:a})},fetchProduct:async()=>{const a=await r({url:"api/product",method:"GET"}),s=await a;e({sisaPersediaan:s.data.sisa_persediaan,productList:s.data.SbsProductList})},fetchOrder:async(a,s,t)=>{const c=new Date(s.$d),o=n()(c).format("YYYY-MM-DD"),i=new Date(t.$d),d=n()(i).format("YYYY-MM-DD"),l=await r({url:"api/so",method:"GET",marketplace_id:"tokopedia"===a?"Tokopedia":"Shopee",start_date:o,end_date:d}),h=await l;e({sumPrice:h.data.sum_price,sumTotalPrice:h.data.sum_total_price,sumHpp:h.data.sum_hpp,sumMargin:h.data.sum_margin,sumAdmin:h.data.sum_admin,sumOngkir:h.data.sum_ongkir,sumCleanMargin:h.data.sum_clean_margin,orderList:h.data.SbsOrderList})},uploadSalesOrder:async a=>{const s=new FormData;s.append("file",a);const t=await r({url:"api/so",method:"POST",formData:s}),c=await t;e({message:c.responseMessage})},uploadPurchaseOrder:async a=>{const s=new FormData;s.append("file",a);const t=await r({url:"api/po",method:"POST",formData:s}),c=await t;e({message:c.responseMessage})},updateOrder:async(a,s)=>{const t=await r({url:"api/so",method:"PUT",soNumber:a,status:s}),c=await t;e({message:c.responseMessage})}})))}}]);
//# sourceMappingURL=754.633aa881.chunk.js.map