"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[754],{1754:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var t=a(2791),r=a(1878),o=a(7689),c=a(2937),d=a(5866),n=a(1652),i=a(4750),l=a(1716),_=a(7892),h=a.n(_),m=a(184);const p=()=>{const{marketplace:e}=(0,o.UO)(),{fetchOrder:s,orderList:a,sumPrice:_,sumTotalPrice:p,sumHpp:u,sumMargin:S,sumAdmin:x,sumOngkir:j,sumCleanMargin:T}=(0,r.Z)((e=>e)),P=new Intl.NumberFormat("pt-BR"),E=new Date,D=new Date(E.getFullYear(),E.getMonth(),1),O=E.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"),[g,A]=(0,t.useState)(h()(D)),[f,C]=(0,t.useState)(h()(O));return(0,t.useEffect)((()=>{s(e,g,f)}),[s,e,g,f]),(0,m.jsx)(c.rb,{children:(0,m.jsx)(c.b7,{xs:12,children:(0,m.jsxs)(c.xH,{className:"mb-4",children:[(0,m.jsx)(c.bn,{children:(0,m.jsx)("strong",{children:"Sales Order"})}),(0,m.jsxs)(c.sl,{children:[(0,m.jsxs)("div",{className:"row align-items-end",children:[(0,m.jsx)("div",{className:"col-3",children:(0,m.jsx)(n._,{dateAdapter:i.y,children:(0,m.jsx)(d.C,{components:["DatePicker","DatePicker"],children:(0,m.jsx)(l.M,{label:"Tanggal Awal",value:g,onChange:e=>A(e)})})})}),(0,m.jsx)("div",{className:"col-3",children:(0,m.jsx)(n._,{dateAdapter:i.y,children:(0,m.jsx)(d.C,{components:["DatePicker","DatePicker"],children:(0,m.jsx)(l.M,{label:"Tanggal Akhir",value:f,onChange:e=>C(e)})})})})]}),(0,m.jsxs)("table",{className:"table mtop30",children:[(0,m.jsxs)("thead",{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{scope:"col"}),(0,m.jsx)("th",{scope:"col"}),(0,m.jsx)("th",{scope:"col"}),(0,m.jsx)("th",{scope:"col"}),(0,m.jsx)("th",{scope:"col",children:P.format(_)}),(0,m.jsx)("th",{scope:"col",children:P.format(p)}),(0,m.jsx)("th",{scope:"col",children:P.format(u)}),(0,m.jsx)("th",{scope:"col",children:P.format(S)}),(0,m.jsx)("th",{scope:"col",children:P.format(x)}),(0,m.jsx)("th",{scope:"col",children:P.format(j)}),(0,m.jsx)("th",{scope:"col",children:P.format(T)})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{scope:"col",children:"#"}),(0,m.jsx)("th",{scope:"col",children:"InvoiceNo"}),(0,m.jsx)("th",{scope:"col",children:"Nama Barang"}),(0,m.jsx)("th",{scope:"col",children:"Qty"}),(0,m.jsx)("th",{scope:"col",children:"Sales Price"}),(0,m.jsx)("th",{scope:"col",children:"Total Price"}),(0,m.jsx)("th",{scope:"col",children:"Hpp"}),(0,m.jsx)("th",{scope:"col",children:"Gross"}),(0,m.jsx)("th",{scope:"col",children:"Admin"}),(0,m.jsx)("th",{scope:"col",children:"Ongkir"}),(0,m.jsx)("th",{scope:"col",children:"Clean Margin"})]})]}),(0,m.jsx)("tbody",{children:a.map(((e,s)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:s+1}),(0,m.jsx)("td",{children:e.invoice_no}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:e.product_name})}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:e.qty})}),(0,m.jsx)("td",{children:P.format(e.sales_price)}),(0,m.jsx)("td",{children:P.format(e.total_price)}),(0,m.jsx)("td",{children:P.format(e.hpp)}),(0,m.jsx)("td",{children:P.format(e.gross_margin)}),(0,m.jsx)("td",{children:P.format(e.power_merchant_fee)}),(0,m.jsx)("td",{children:P.format(e.ongkir_fee)}),(0,m.jsx)("td",{children:P.format(Math.round(e.clean_margin))})]},s)))})]})]})]})})})}},1878:(e,s,a)=>{a.d(s,{Z:()=>d});var t=a(5847);const r=function(e){let{url:s,method:a,marketplace_id:t,start_date:r,end_date:o,formData:c,soNumber:d,status:n}=e;return fetch(s,{method:a,headers:{marketplace_id:t,start_date:r,end_date:o,invoice_no:d,status:n},body:c}).then((e=>e)).then((e=>e.json()),(e=>(console.log(e),"")))};var o=a(7892),c=a.n(o);const d=(0,t.Ue)((e=>({sisaPersediaan:0,sumPrice:0,sumTotalPrice:0,sumHpp:0,sumMargin:0,sumAdmin:0,sumOngkir:0,sumCleanMargin:0,productList:[],orderList:[],startDate:"",endDate:"",message:"",setStartDate:async s=>{console.log(s),e({startDate:s})},setEndDate:async s=>{e({endDate:s})},fetchProduct:async()=>{const s={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL+"product",a=await r({url:s,method:"GET"}),t=await a;e({sisaPersediaan:t.data.sisa_persediaan,productList:t.data.SbsProductList})},fetchOrder:async(s,a,t)=>{const o=new Date(a.$d),d=c()(o).format("YYYY-MM-DD"),n=new Date(t.$d),i=c()(n).format("YYYY-MM-DD"),l={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL+"so",_=await r({url:l,method:"GET",marketplace_id:"tokopedia"===s?"Tokopedia":"Shopee",start_date:d,end_date:i}),h=await _;e({sumPrice:h.data.sum_price,sumTotalPrice:h.data.sum_total_price,sumHpp:h.data.sum_hpp,sumMargin:h.data.sum_margin,sumAdmin:h.data.sum_admin,sumOngkir:h.data.sum_ongkir,sumCleanMargin:h.data.sum_clean_margin,orderList:h.data.SbsOrderList})},uploadSalesOrder:async s=>{const a={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL+"so",t=new FormData;t.append("file",s);const o=await r({url:a,method:"POST",formData:t}),c=await o;e({message:c.responseMessage})},uploadPurchaseOrder:async s=>{const a={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL+"po",t=new FormData;t.append("file",s);const o=await r({url:a,method:"POST",formData:t}),c=await o;e({message:c.responseMessage})},updateOrder:async(s,a)=>{const t={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL+"so",o=await r({url:t,method:"PUT",soNumber:s,status:a}),c=await o;e({message:c.responseMessage})}})))}}]);
//# sourceMappingURL=754.a9e7971b.chunk.js.map